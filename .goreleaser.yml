version: 2
project_name: gitmorph

builds:
  - id: gitmorph
    main: ./main.go
    goos:
      - darwin
      - linux
    goarch:
      - amd64
      - arm64
    env:
      - CGO_ENABLED=0
    flags:
      - -mod=vendor

# Only archive normal builds, universal binaries handled automatically
archives:
  - id: gitmorph
    builds:
      - gitmorph_linux_amd64
      - gitmorph_linux_arm64
      - gitmorph_darwin_amd64
      - gitmorph_darwin_arm64
    format: tar.gz
    files:
      - gitmorph

universal_binaries:
  - id: gitmorph
    name_template: "{{.ProjectName}}_{{.Version}}"
    ids:
      - gitmorph
    replace: true

homebrew_casks:
  - name: gitmorph
    homepage: "https://github.com/abhigyan-mohanta/gitmorph"
    repository:
      owner: abhigyan-mohanta
      name: homebrew-tap
    binary: gitmorph

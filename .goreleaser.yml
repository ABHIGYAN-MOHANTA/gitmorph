version: 2
project_name: gitmorph

builds:
  - id: gitmorph
    main: ./main.go
    goos:
      - darwin
      - linux
    goarch:
      - amd64
      - arm64
    env:
      - CGO_ENABLED=0
    flags:
      - -mod=vendor

archives:
  - id: linux_archives
    builds:
      - gitmorph
    format: tar.gz
    files:
      - gitmorph

universal_binaries:
  - id: gitmorph
    name_template: "{{.ProjectName}}_{{.Version}}"
    ids:
      - gitmorph
    replace: true

homebrew_casks:
  - name: gitmorph
    homepage: "https://github.com/abhigyan-mohanta/gitmorph"
    repository:
      owner: abhigyan-mohanta
      name: homebrew-tap
    binary: dist/gitmorph_darwin_all/gitmorph_{{.Version}} # point to universal binary
